(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[39436],{224455:(e,t,o)=>{o.d(t,{Z:()=>A});var i=o(667294),s=o(702664),n=o(898781),a=o(883119),l=o(785893);function r(e){const t=(0,n.ZP)(),{viewType:o,boardId:i,handleTouch:s}=e,r=t.bt("Tablero", "Board", "createMenuLinkButton.Create.Board.Label", undefined, true),c=t.bt("Subtablero", "Section", "createMenuLinkButton.Create.Section.Label", undefined, true);return 5===o&&i?(0,l.jsx)(a.iP,{role:"link",href:`/board/${i}/create_section/`,rounding:2,onTap:s,children:(0,l.jsx)(a.xu,{paddingY:2,"data-test-id":"addSectionButton",children:(0,l.jsx)(a.X6,{size:"400",children:c})})}):(0,l.jsx)(a.iP,{role:"link",onTap:s,href:"/board/create/",children:(0,l.jsx)(a.xu,{paddingY:2,"data-test-id":"createMenuCreateBoardButton",children:(0,l.jsx)(a.X6,{size:"400",children:r})})})}var c=o(276775),d=o(741740);function h({disabledPinCreation:e,handleDisablePublish:t,handleTouch:o}){const i=(0,n.ZP)(),s=(0,c.useHistory)(),r=e=>({base64Image:e,method:d.I}),h=i.bt("Foto", "Photo", "createPinButton.Photo.Upload.Label", undefined, true);return(0,l.jsx)(a.iP,{tapStyle:"none",onTap:()=>{e?t():o()},children:(0,l.jsxs)(a.xu,{position:"relative",paddingY:2,children:[(0,l.jsx)(a.X6,{size:"400",children:h}),e?null:(0,l.jsx)("input",{id:"upload-pin",type:"file",accept:"image/*",onChange:e=>{const t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{const e=t.result;s.push({pathname:`/pin/create/${d.I}/`,state:r(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"}})]})})}var u=o(121151);function _({isOpen:e,onDismiss:t}){const o=(0,n.ZP)();return(0,l.jsx)(u.ZP,{accessibilityModalLabel:o.bt("Modo de mensaje de error de publicación del Pin desactivado", "Disabled Pin Publishing Error Message Modal", "disabledPinCreationModal.modal.accessibilityLabel", undefined, true),isOpen:e,mobileAccessibilityCloseIconLabel:o.bt("Cerrar modo de mensaje de publicación desactivado", "Close disabled publishing message modal", "disabledPinCreationModal.modal.closeIconLabel", undefined, true),onDismiss:t,type:"DisabledPublishingModal",children:(0,l.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[(0,l.jsx)(a.X6,{children:o.bt("¡Vaya!", "Oops...", "disabledPinCreationModal.modal.heading", undefined, true)}),(0,l.jsx)(a.xu,{paddingY:3,children:(0,l.jsx)(a.xv,{children:o.bt("Nuestro servidor está experimentando algunas dificultades en este momento. Intenta actualizar y volver a publicarlo más tarde.", "Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.", "disabledPinCreationModal.modal.text", undefined, true)})}),(0,l.jsx)(a.xu,{paddingY:3,children:(0,l.jsx)(a.zx,{color:"red",onClick:()=>t(),size:"lg",text:o.bt("Omitir", "Dismiss", "disabledPinCreationModal.button.dismiss", undefined, true)})})]})})}var p=o(941646),m=o(500594),b=o(134906),x=o(773285),g=o(112690),v=o(728214),f=o(859704);function P(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const w=e=>{const t=window&&window.innerWidth||0,o=e.bt("Introduce un enlace para crear un Pin, https://...", "Enter a link to create a Pin, https://...", "placeholder in text field where a user inputs a URL to create a Pin", undefined, true),i=e.bt("Introducir enlace, https://...", "Enter a link, https://...", "placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit", undefined, true);return t<380?i:o};class y extends i.PureComponent{constructor(...e){super(...e),P(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),P(this,"createPinFromLinkInput",(0,i.createRef)()),P(this,"closeCreateModal",(()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})})),P(this,"clearValidationError",(()=>{this.setState({urlValidationError:null})})),P(this,"openCreateModal",(e=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,m.is)(this.props.i18n)})()})),P(this,"handleCreatePinFromLinkTouch",(()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})})),P(this,"handleDisablePublish",(()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})})),P(this,"handleLinkFieldChange",(({value:e})=>{this.setState({createPinFromLinkUrl:e})})),P(this,"handlePinFromLinkFormSubmit",((e,t)=>{const{createPinFromLinkUrl:o}=this.state;e.preventDefault();const{errors:i}=(0,b.Jx)({message:this.props.i18n.bt("¡Vaya! Introduce una URL válida.", "Oops! Please enter a valid URL.", "URL validation error message on Pin builder form", undefined, true)})(o),[s]=i;s?this.setState({urlValidationError:s}):this.handleUrlValidationSuccess(t)})),P(this,"handleTouch",(()=>{const{logContextEvent:e,viewType:t,elementType:o}=this.props;e({view_type:t,view_parameter:3106,element:o,event_type:102})})),P(this,"handleUrlValidationSuccess",(e=>{this.setState({showInlineTextEditCreatePin:!1});const t=this.state.createPinFromLinkUrl;this.props.updatePinBuilderInput({submittedLink:t}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:t}}),this.closeCreateModal()})),P(this,"renderCreatePinFromLinkOption",(()=>{const{disabledPinCreation:e,history:t}=this.props,{createPinFromLinkUrl:o,showInlineTextEditCreatePin:i}=this.state,s=this.props.i18n.bt("Sitio web", "Website", "editPin.CreatePinFromUrl.Label", undefined, true);return(0,l.jsx)(a.kC,{alignItems:"center",height:46,justifyContent:"start",children:i?(0,l.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,t),style:{width:"100%"},children:(0,l.jsxs)(a.xu,{display:"flex",justifyContent:"between",position:"relative",children:[(0,l.jsxs)(a.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),(0,l.jsx)(a.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:w(this.props.i18n),size:"lg",value:o})]}),(0,l.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Crea un Pin desde el enlace introducido", "Create Pin from entered link", "navigation button to confirm user will create a Pin from a link they entered", undefined, true),iconColor:"darkGray",icon:"arrow-forward",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,t),size:"lg"})]})}):(0,l.jsx)(a.iP,{onTap:()=>{e?this.handleDisablePublish():this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:(0,l.jsx)(a.xu,{position:"relative","data-test-id":"websiteButton",children:(0,l.jsx)(a.X6,{size:"400",children:s})})})})})),P(this,"renderErrorFlyout",(()=>{const{urlValidationError:e}=this.state;return e&&(0,l.jsx)(a.J2,{anchor:this.createPinFromLinkInput.current,color:"red",idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:(0,l.jsx)(a.xu,{padding:3,width:"100%",children:(0,l.jsx)(a.xv,{align:"center",color:"inverse",weight:"bold",children:e})})})}))}componentDidMount(){const{isInputOpen:e,submittedLink:t}=this.props;(e||t)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:t||""})}render(){const{bgColor:e,boardId:t,buttonPadding:o,disabledPinCreation:s,i18n:n,iconButtonColor:c="gray",iconButtonSize:d="xl",viewType:m}=this.props,{showCreateModal:b,showPublishingDisabledError:x}=this.state;let g=this.props.i18n.bt("Añadir un Pin o tablero", "Add a Pin or board", "heading in profile create modal", undefined, true);164===m?g=this.props.i18n.bt("Añadir al subtablero", "Add to section", "heading in section create modal", undefined, true):5===m&&(g=this.props.i18n.bt("Añadir un Pin o un subtablero", "Add a Pin or section", "heading in profile create modal", undefined, true)||n.bt("Añadir al tablero", "Add to board", "heading in board create modal", undefined, true));const v=4===m?this.props.i18n.bt("Añadir al perfil", "Add to profile", "editPin.AddToProfile.Modal.Header", undefined, true):g;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,l.jsx)(p.Z,{id:"createMenuCreateButton",children:(0,l.jsx)(a.hU,{accessibilityLabel:this.props.i18n.bt("Crear un Pin o tablero", "Create a Pin or board", "icon that opens model prompting user to create a new pin or board", undefined, true),bgColor:e,iconColor:c,icon:"add",size:d,padding:"auto"!==o?o:1,onClick:({event:e})=>this.openCreateModal(e)})})}),b&&(0,l.jsx)(u.ZP,{mobileAccessibilityCloseIconLabel:this.props.i18n.bt("Cerrar modo de creación de tablero y Pin", "close board and pin create modal", "close modal that prompts user to create a new pin or board", undefined, true),accessibilityModalLabel:"",heading:v,isOpen:this.state.showCreateModal,onDismiss:this.closeCreateModal,type:"create_menu",children:(0,l.jsx)(a.xu,{padding:3,children:(0,l.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(a.xu,{paddingX:2,children:[(0,l.jsx)(a.xv,{children:this.props.i18n.bt("Crear", "Create", "editPin.Create.Section.Text", undefined, true)}),(0,l.jsx)(i.Fragment,{children:this.renderCreatePinFromLinkOption()}),(0,l.jsx)(h,{disabledPinCreation:s,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==m&&(0,l.jsxs)(a.xu,{marginTop:6,paddingX:2,children:[(0,l.jsx)(a.xv,{children:this.props.i18n.bt("Añadir", "Add", "editPin.Section.Add.Text", undefined, true)}),(0,l.jsx)(r,{boardId:t,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:m})]})]}),(0,l.jsx)(a.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:(0,l.jsx)(a.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n.bt("Cerrar", "Close", "editPin.Modal.Close.Button", undefined, true)})})]})})}),x&&(0,l.jsx)(_,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}})]})}}function A(e){const t=(0,n.ZP)(),{checkExperiment:o}=(0,x.F)(),i=["disable_all","disable_web_pins"].includes(o("disable_pin_creation").group),a=(0,s.useDispatch)(),r=(0,c.useHistory)(),{pinBuilder:d}=(0,s.useSelector)((e=>e.session)),h=(0,g.Z)(),u=d&&d.isInputOpen,_=d&&d.submittedLink,p=(0,v.Z)();return(0,l.jsx)(y,{...e,disabledPinCreation:i,history:r,i18n:t,isInputOpen:u,logContextEvent:h,requireAuthForLimitedLogin:p,submittedLink:_,updatePinBuilderInput:e=>a((0,f.p)(e))})}},439436:(e,t,o)=>{o.d(t,{Zk:()=>q,Z7:()=>G,wt:()=>$,ZP:()=>ie});var i=o(667294),s=o(702664);const n=e=>{const t=e.split("/");return 4===t.length?"pin"===t[1]&&""===t[3]:3===t.length&&("pin"===t[1]&&""!==t[2])};var a=o(954571),l=o(224455),r=o(898781),c=o(883119),d=o(785893);const h=({color:e="subtle",showLabel:t=!1,viewType:o})=>{const i=(0,r.ZP)();return(0,d.jsx)(c.xu,{rounding:3,flex:"grow",children:(0,d.jsxs)(c.xu,{display:"flex",justifyContent:"center",position:"relative",direction:"column",children:[(0,d.jsx)(c.xu,{display:"flex",justifyContent:"center",padding:1,children:(0,d.jsx)(l.Z,{elementType:249,iconButtonColor:"gray",iconButtonSize:"xl",viewType:o})}),t&&(0,d.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{WebkitUserSelect:"none"}},children:(0,d.jsx)(c.xv,{align:"center",size:"100",lineClamp:1,color:e,children:i.bt("Crear", "Create", "nav.navFooterAdd.createPinButton", undefined, true)})})]})})};var u=o(116303);const _=({height:e,width:t})=>(0,d.jsx)(c.xu,{alignItems:"center",color:"primary",dangerouslySetInlineStyle:{__style:{padding:"0 3px 0 2px"}},display:"flex",height:e,justifyContent:"center",width:t,position:"absolute",rounding:"pill",children:(0,d.jsx)(c.xv,{align:"center",color:"inverse",size:"100",weight:"bold",children:(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 0 1px 1px"}},children:" "})})}),p={zIndex:1,position:"relative"},m=(0,i.forwardRef)((({accessibilityLabel:e,avatarSrc:t,badge:o,badgeMargins:s,color:n,flyoutText:a,icon:l,onTouch:h,showFlyout:m,showFlyoutButton:b,showLabel:x,svgPath:g,title:v,to:f},P)=>{const w=(0,r.ZP)(),[y,A]=(0,i.useState)(!1),j=(0,i.useRef)(),S="nav-bar-"+String(l);return(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:y?p:{}},flex:"grow",children:(0,d.jsx)(c.iP,{onBlur:()=>A(!1),onFocus:()=>A(!0),onTap:({event:e})=>h(e),tapStyle:"compress",rounding:x?4:6,role:"link",href:f,children:(0,d.jsxs)(c.xu,{display:"flex",justifyContent:"center",position:"relative",color:"transparent",direction:"column",rounding:3,"data-test-id":S,children:[(0,d.jsxs)(c.xu,{position:"relative",display:"flex",justifyContent:"center",ref:P,children:[(0,d.jsx)(c.xu,{padding:2,ref:j,children:t?(0,d.jsx)(c.xu,{rounding:"circle",dangerouslySetInlineStyle:{__style:{boxShadow:"default"===n?"0 0 0 2px black":"0 0 0 2px transparent"}},children:(0,d.jsx)(u.Z,{name:e,src:t,size:"xs"})}):(0,d.jsx)(c.JO,{accessibilityLabel:e,icon:l,color:n,size:24,inline:!0,dangerouslySetSvgPath:g?{__path:g}:void 0})}),o&&(0,d.jsx)(c.xu,{marginStart:null==s?void 0:s.marginLeft,marginEnd:null==s?void 0:s.marginRight,marginTop:null==s?void 0:s.marginTop,marginBottom:null==s?void 0:s.marginBottom,position:"absolute",children:o.text?(0,d.jsx)(c.Ct,{position:"middle",type:"error",text:o.text.toString()||""}):(0,d.jsx)(_,{height:o.height,width:o.width})}),m&&(0,d.jsx)(c.J2,{anchor:j.current,color:"blue",onDismiss:()=>{},showCaret:!0,size:"flexible",children:(0,d.jsxs)(c.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",minHeight:70,paddingX:b?4:0,paddingY:b?4:1,width:b?200:132,children:[(0,d.jsx)(c.xv,{align:"center",color:"inverse",children:a||w.bt("Explorar algo nuevo", "Explore something new", "Flyout message prompting user to click on the explore icon.", undefined, true)}),b?(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(c.zx,{role:"link",accessibilityLabel:w.bt("Explorar", "Explore", "navFooter.flyout.button", undefined, true),color:"white",href:f,onClick:({event:e})=>h(e),text:w.bt("Explorar", "Explore", "navFooter.flyout.button", undefined, true)})}):null]})})]}),x&&(0,d.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{WebkitUserSelect:"none"}},children:(0,d.jsx)(c.xv,{align:"center",color:n,size:"100",lineClamp:1,children:v})})]})})})})),b=({accessibilityLabel:e,homeFlyoutText:t,isAuthenticated:o,onTouch:s,showHomeBadge:n,shouldUpsellHomePage:a,showHomeFlyoutWithButton:l,selectedItem:r,showLabel:h,title:u})=>{const _={badge:{width:8,height:8},badgeMargins:{marginLeft:6,marginTop:1}},p=(0,i.useRef)(null);return(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(m,{accessibilityLabel:e,badge:n?_.badge:void 0,badgeMargins:n?_.badgeMargins:void 0,color:"home"===r?"default":"subtle",flyoutText:t,onTouch:()=>{s()},showFlyout:l,showFlyoutButton:l,showLabel:h,svgPath:"M12 0L1 10v14h8v-7a3 3 0 116 0v7h8V10z",title:u,to:o?"/":"/ideas/",ref:p}),a&&(0,d.jsx)(c.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:(0,d.jsx)(c.o3,{size:90})})]})};var x=o(121093),g=o(568388),v=o(332611),f=o(378518);const P=[501227],w={badge:{width:8,height:8,text:" "},badgeMargins:{marginLeft:6,marginTop:1}},y=(0,i.memo)((({avatarSrc:e,completeExperience:t,experience:o,isActive:n,locationPath:a,onTouch:l,showLabel:c,username:h})=>{const u=(0,r.ZP)(),{isAuthenticated:_}=(0,s.useSelector)((({session:e})=>e)),p=a.startsWith(`/${h}`),b=o&&P.includes(o.experience_id);(0,i.useEffect)((()=>{if(b&&p){const{experience_id:e,placement_id:i}=o||{};t(i,e)}}));const g=t=>(0,d.jsx)(m,{accessibilityLabel:u.bt("Mi perfil", "My profile", "Nav bar icon", undefined, true),avatarSrc:e,color:n?"default":"subtle",icon:"person",onTouch:l,showLabel:c,title:u.bt("Guardado", "Saved", "Saved button on the Nav bar", undefined, true),to:h?`/${h}/`:_?"/":"/unauth-profile/",...t});return b&&!p?(0,d.jsx)(x.Z,{eligibleIds:P,experience:o,children:g(w)}):g({})})),A=(0,s.connect)(null,(e=>({completeExperience:(t,o)=>e((0,v.CK)(t,o))})))((e=>{const t=(0,f._)({id:1000181});return(0,d.jsx)(g.Z,{children:(0,d.jsx)(y,{experience:t,...e})})})),j=({accessibilityLabel:e,onTouch:t,selectedItem:o,showLabel:s,title:n})=>{const a=(0,i.useRef)(null);return(0,d.jsx)(i.Fragment,{children:(0,d.jsx)(m,{accessibilityLabel:e,color:"videos"===o?"default":"subtle",onTouch:()=>{t()},showLabel:s,svgPath:"M10.53 15.85A1 1 0 019 15V9a1 1 0 011.53-.85l4.98 3a1 1 0 010 1.7zM0 8a8 8 0 018-8h8a8 8 0 018 8v8a8 8 0 01-8 8H8a8 8 0 01-8-8zm4 0v8a4 4 0 004 4h8a4 4 0 004-4V8a4 4 0 00-4-4H8a4 4 0 00-4 4z",title:n,to:"/videos/",ref:a})})};var S=o(707853),T=o(6637);function L(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class C extends i.PureComponent{constructor(...e){super(...e),L(this,"state",{newsBadgeCount:0,unreadMessageCount:0,showBadge:!1}),L(this,"clearNotificationBadge",(()=>{const{isAuthenticated:e,onTouch:t}=this.props;e&&(T.Z.create("NewsHubBadgeResource",{}).callDelete({showError:!1}),this.setState({newsBadgeCount:0,showBadge:!1})),t&&t()})),L(this,"getBadging",(()=>{T.Z.create("NewsHubBadgeResource",{}).callGet().then((({resource_response:{data:e}})=>{const t=e.news_hub_count+e.conversations_unseen_count;this.setState({newsBadgeCount:e.news_hub_count,unreadMessageCount:e.conversations_unseen_count,showBadge:t>0})}))}))}componentDidMount(){this.props.isAuthenticated&&this.getBadging()}render(){const{isActive:e,showLabel:t,icon:o="speech-ellipsis",onTouch:i}=this.props,{newsBadgeCount:s,unreadMessageCount:n,showBadge:a}=this.state,l=s+n,r=l>0&&l<100?l:"99+",c=r.toString().length,h={width:1===c?16:2===c?24:30,height:16,text:r},u=n>0?"/inbox/":"/notifications/";return(0,d.jsx)(m,{accessibilityLabel:this.props.i18n.bt("Notificaciones y mensajes nuevos", "News notifications and messages", "mweb.navbar.notifs_button.a11y", undefined, true),badge:a&&h||void 0,badgeMargins:{marginLeft:4},icon:o,to:u,color:e?"default":"subtle",onTouch:"/notifications/"===u?this.clearNotificationBadge:i,title:this.props.i18n.bt("Notificaciones", "Notifications", "Notifications button on the Nav bar", undefined, true),showLabel:t})}}const z=(0,s.connect)((function(e){return{isAuthenticated:e.session.isAuthenticated}}),(()=>({})))((function(e){const t=(0,r.ZP)();return(0,d.jsx)(C,{...e,i18n:t})}));var F=o(968919),H=o(385740),I=o(276775);class B extends i.PureComponent{constructor(...e){var t,o,i;super(...e),i=null,(o="leftHomeTimeOut")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}componentDidUpdate(e){const{location:t}=this.props;this.shouldRefreshHomefeed(t.pathname)?this.refreshHomefeed():this.shouldSetLeftHomeTimeout(t.pathname,e)?this.setLeftHomeTimeout():this.shouldClearLeftHomeTimeout(t.pathname)&&this.clearLeftHomeTimeout()}componentWillUnmount(){this.clearLeftHomeTimeout()}setLeftHomeTimeout(){this.leftHomeTimeOut=setTimeout((()=>{this.leftHomeTimeOut&&(this.clearLeftHomeTimeout(),this.leftHomeTimeOut=void 0)}),5e3)}clearLeftHomeTimeout(){this.leftHomeTimeOut&&(clearTimeout(this.leftHomeTimeOut),this.leftHomeTimeOut=null)}refreshHomefeed(){(0,F.cV)("homefeed"),this.leftHomeTimeOut=null}shouldClearLeftHomeTimeout(e){return this.leftHomeTimeOut&&"/"===e}shouldRefreshHomefeed(e){return"/"===e&&92===this.props.viewParameter&&void 0===this.leftHomeTimeOut}shouldSetLeftHomeTimeout(e,t){return null===this.leftHomeTimeOut&&"/"!==e&&"/"===t.location.pathname&&!e.startsWith("/pin/")}render(){return null}}function k(e){const t=(0,I.useLocation)(),{viewParameter:o,viewData:i}=(0,H.SU)();return(0,d.jsx)(B,{...e,location:t,viewParameter:o,viewData:i})}var M=o(941646),N=o(313047),E=o(995081),U=o(483541),D=o(539497),O=o(773285),Z=o(142958),W=o(112690),V=o(52022),R=o(529406),X=o(630135);function Y(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const q=52,$=160,G=60,J={},K=e=>{const t=e>100?e-100:5,o=Math.max(e-t,0);window.scrollTo(0,o),o>0&&window.requestAnimationFrame((()=>K(o)))},Q=e=>"/"===e||n(e)||e.startsWith("/search/")||"/inbox/"===e||"/inbox/compose/"===e||"/notifications/"===e||e.includes("/report/"),ee=e=>{switch(e){case"home":return 146;case"notifications":return 139;case"profile":return 40;case"today":return 11674;case"videos":return 11924;case"search":return 43;default:return}},te=(e,t,o)=>{const i=J[e.key];if(i)return i;const s=e.pathname;return"/"===s||!o&&"/ideas"===s?"home":s.startsWith("/inbox")?"inbox":s.startsWith("/notifications")?"notifications":s.startsWith("/videos")?"videos":s.startsWith("/today")?"today":s.startsWith("/search")?"search":(0,I.matchPath)(s,{path:`/${t}/(|pins|boards|tried)?`,exact:!0})||!o&&s.startsWith("/unauth-profile")?"profile":null};class oe extends i.PureComponent{constructor(...e){super(...e),Y(this,"state",{bottom:0,hasScrolled:!1,isNavFooterHidden:!1,prevLocation:this.props.location,selectedItem:te(this.props.location,this.props.username,this.props.isAuthenticated),showUnauthNavExplorePrompt:!1}),Y(this,"handleScrollForIphoneX",(()=>{window.innerHeight!==this.currInnerHeight&&(this.currInnerHeight=window.innerHeight,this.forceUpdate())})),Y(this,"selectItem",(e=>{const{logContextEvent:t,viewData:o,viewParameter:i,viewType:s}=this.props;this.setState({selectedItem:e}),t({component:8,element:ee(e),event_type:102,view_data:o,view_type:s,view_parameter:i})})),Y(this,"handleHomeTouch",(()=>{const{activeHomefeedTabIndex:e,isAuthenticated:t,location:o,setHomeFlyoutText:i,setHomefeedAsActiveHomefeedTab:s,setShowHomeBadge:n,setShowHomeFlyoutWithButton:a,trackInteraction:l}=this.props;this.selectItem("home"),(0,X.E)(!1),i(),n(!1),a(!1),l({action:"click",item:"nav-bar-home"}),t?(0,D.My)("mweb.auth.bottom-nav.home-tap"):(0,D.My)("mweb.unauth.bottom-nav.home-tap"),R.C.has(o.pathname)&&e!==R.e&&0===window.scrollY?s():0===window.scrollY&&"/"===o.pathname?(0,F.cV)("homefeed"):"/"===window.location.pathname&&window.scrollY>0&&K(window.scrollY)})),Y(this,"handleVideoIconTouch",(()=>{const{trackInteraction:e}=this.props;this.selectItem("videos"),e({action:"click",item:"nav-bar-videos"}),(0,D.My)("mweb.unauth.bottom-nav.videos-icon-tap")})),Y(this,"handleInboxTouch",(()=>this.selectItem("inbox"))),Y(this,"handleProfileTouch",(()=>{const{isAuthenticated:e,trackInteraction:t}=this.props;this.selectItem("profile"),t({action:"click",item:"nav-bar-profile"}),e?(0,D.My)("mweb.auth.bottom-nav.profile-tap"):(0,D.My)("mweb.unauth.bottom-nav.profile-tap")})),Y(this,"handleSearchTouch",(()=>{const{isAuthenticated:e,trackInteraction:t}=this.props;this.selectItem("search"),t({action:"click",item:"nav-bar-search"}),e?(0,D.My)("mweb.auth.bottom-nav.search-tap"):(0,D.My)("mweb.unauth.bottom-nav.search-tap")})),Y(this,"handleNavFooterScroll",(e=>{const{experience:t,dismissExperience:o,setIsNavFooterHiddenAfterScroll:i}=this.props,{hasScrolled:s}=this.state;t&&502511===t.experience_id&&o&&!s&&o(1000151,502511),this.setState({isNavFooterHidden:e,hasScrolled:!0}),i(e)})),Y(this,"currInnerHeight",0)}componentDidMount(){const{devicePlatform:e}=this.props;this.currInnerHeight=window.innerHeight,(0,E.Rq)(e)&&window.addEventListener("scroll",this.handleScrollForIphoneX)}static getDerivedStateFromProps(e,t){return e.location===t.prevLocation?null:{...t,prevLocation:e.location,selectedItem:te(e.location,e.username,e.isAuthenticated)}}componentDidUpdate({location:e},{selectedItem:t}){const{location:o,history:{action:i}}=this.props,{selectedItem:s}=this.state;e!==o&&("REPLACE"===i||"PUSH"===i&&t!==s)&&(J[e.key]=t,J[o.key]=s)}componentWillUnmount(){const{devicePlatform:e,location:t}=this.props;J[t.key]=this.state.selectedItem,(0,E.Rq)(e)&&window.removeEventListener("scroll",this.handleScrollForIphoneX)}render(){var e;const{forceShowNavFooter:t,isAuthenticated:o,showDockedNavBar:s,dockNavBarForAuthTablet:n,dockNavBarForUnauthTablet:l,inUnauthVideosNavExp:r,homeFlyoutText:u,location:_,shouldUpsellHomePage:p,showHomeBadge:x,showHomeFlyoutWithButton:v,username:f,viewingUser:P,viewType:w}=this.props,{isNavFooterHidden:y,selectedItem:T}=this.state,L=(0,a.Z)(null==P?void 0:P.created_at),C=o&&L,F=((e,t,o)=>t||o?o?"100%":e?320:264:200)(C,o,s);return(0,d.jsxs)(N.FixedFooter,{forceShow:t,height:G,location:_,showDockedNavBar:s,dockNavBarForAuthTablet:n,dockNavBarForUnauthTablet:l,isModal:(H=_.pathname,H.includes("/report/")),footerWidth:F,noPadding:!0,hideOnScroll:!s&&!n&&!l&&(!o||o&&Q(_.pathname)),onScroll:this.handleNavFooterScroll,footerInLego:!0,zIndex:S.Z,children:[(0,d.jsx)(k,{}),(0,d.jsxs)(c.xu,{alignItems:"center",display:"flex",justifyContent:"around",marginEnd:"auto",marginStart:"auto",maxWidth:F,paddingX:2,width:F,children:[(0,d.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",flex:"grow","data-test-id":"nav-bar-home",children:(0,d.jsx)(b,{accessibilityLabel:this.props.i18n.bt("Inicio", "Home", "Nav bar icon", undefined, true),homeFlyoutText:u,isAuthenticated:o,onTouch:this.handleHomeTouch,selectedItem:T,shouldUpsellHomePage:p&&!y,showHomeBadge:x,showHomeFlyoutWithButton:v,showLabel:C,title:this.props.i18n.bt("Inicio", "Home", "Home button on the Nav bar", undefined, true)})}),!o&&(0,d.jsx)(c.xu,{flex:"grow","data-test-id":"nav-bar-search",children:(0,d.jsx)(M.Z,{id:"nav-bar-search",children:(0,d.jsx)(m,{accessibilityLabel:this.props.i18n.bt("Buscar", "Search", "bottomNavBar.searchButton", undefined, true),color:"search"===T?"default":"subtle",icon:"search",onTouch:this.handleSearchTouch,showLabel:C,title:this.props.i18n.bt("Buscar", "Search", "bottomNavBar.searchButton", undefined, true),to:"/search/"})})}),o&&(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(m,{icon:"search",to:"/search/",color:"search"===T?"default":"subtle",accessibilityLabel:this.props.i18n.bt("Buscar", "Search", "Nav bar icon", undefined, true),onTouch:this.handleSearchTouch,title:this.props.i18n.bt("Buscar", "Search", "Nav bar icon", undefined, true),showLabel:C}),(null==P?void 0:P.is_partner)&&(0,d.jsx)(h,{showLabel:C,viewType:w}),(0,d.jsx)(z,{isActive:"inbox"===T||"notifications"===T,onTouch:this.handleInboxTouch,showLabel:C,icon:"speech-ellipsis"})]}),r&&(0,d.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",flex:"grow","data-test-id":"nav-bar-videos",children:(0,d.jsx)(j,{accessibilityLabel:this.props.i18n.bt("Vídeos", "Videos", "bottomNavBar.VideosButton", undefined, true),onTouch:this.handleVideoIconTouch,selectedItem:T,showLabel:C,title:this.props.i18n.bt("Vídeos", "Videos", "bottomNavBar.VideosButton", undefined, true)})}),(0,d.jsx)(g.Z,{children:(0,d.jsx)(c.xu,{flex:"grow","data-test-id":"nav-bar-profile",children:(0,d.jsx)(A,{avatarSrc:!P||null!==(e=P.image_small_url)&&void 0!==e&&e.includes("default")||"string"!=typeof P.image_small_url?"":P.image_small_url,isActive:"profile"===T,locationPath:_.pathname,onTouch:this.handleProfileTouch,showLabel:C,username:f})})})]})]});var H}}const ie=(0,s.connect)((function({homefeedTabUI:e,session:t,users:o}){return{activeHomefeedTabIndex:e.activeTabIndex,devicePlatform:t.userAgentPlatform,isAuthenticated:t.isAuthenticated,username:t.isAuthenticated&&o[t.userId]?o[t.userId].username:"",viewingUser:t.isAuthenticated?o[t.userId]:void 0}}),(function(e){return{dismissExperience:(t,o)=>e((0,v.Qu)(t,o)),setHomefeedAsActiveHomefeedTab:()=>e((0,U.r)(null,R.e))}}))((e=>{const t=(0,X.S)(),o=(0,I.useHistory)(),i=(0,I.useLocation)(),s=(0,r.ZP)(),{forceShowNavFooter:n,homeFlyoutText:a,setHomeFlyoutText:l,setIsNavFooterHiddenAfterScroll:c,setShowHomeBadge:h,setShowHomeFlyoutWithButton:u,showHomeBadge:_,showHomeFlyoutWithButton:p}=(0,Z.U)(),m=(0,f._)({id:1000151}),{viewParameter:b,viewType:x,viewData:g}=(0,H.SU)(),v=(0,W.Z)(),P=(0,V.Z)(),{checkExperiment:w}=(0,O.F)();return w("social_growth_holdout_2022_h2"),(0,d.jsx)(oe,{...e,experience:m,forceShowNavFooter:n,history:o,location:i,logContextEvent:v,homeFlyoutText:a,setHomeFlyoutText:l,setIsNavFooterHiddenAfterScroll:c,setShowHomeBadge:h,setShowHomeFlyoutWithButton:u,showHomeBadge:_,showHomeFlyoutWithButton:p,shouldUpsellHomePage:t,trackInteraction:P,i18n:s,viewData:g,viewParameter:b,viewType:x})}))},142958:(e,t,o)=>{o.d(t,{U:()=>l,m:()=>r});var i=o(667294),s=o(425288),n=o(785893);const{Provider:a,useHook:l}=(0,s.Z)("NavFooterContext");function r({children:e}){const[t,o]=(0,i.useState)(),[s,l]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(!1),[u,_]=(0,i.useState)(!1);return(0,n.jsx)(a,{value:{forceShowNavFooter:u,homeFlyoutText:t,isNavFooterHiddenAfterScroll:s,setForceShowNavFooter:_,setHomeFlyoutText:o,setIsNavFooterHiddenAfterScroll:l,setShowHomeBadge:c,setShowHomeFlyoutWithButton:h,showHomeBadge:r,showHomeFlyoutWithButton:d},children:e})}},741740:(e,t,o)=>{o.d(t,{I:()=>i,y:()=>s});const i="uploaded",s="pinbuilder"},859704:(e,t,o)=>{o.d(t,{F:()=>s,p:()=>n});var i=o(983360);const s=e=>({type:i.q,payload:e}),n=e=>({type:i.GG,payload:e})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/39436.es_ES-43c30312eb11fae4.mjs.map